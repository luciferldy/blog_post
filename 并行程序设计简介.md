+++
date = "2015-05-13T15:56:13+08:00"
menu = "main"
tags = ["code"]
title = "并行程序设计简介"

+++

这是一篇课堂笔记，关于并行程序的设计方面哦，希望能够对一些人有帮助。

##### 并行计算机分类（Flynn）

* SISD(Single Instruction, Single Data) 串行计算机
* SIMD 适用性很有限，MPEG累计算，字符串匹配等
* MIMD 常见的并行计算机都可以归为此类MPP/Cluster/SMP/当前基于Cache的Multi-core(Intel, AMD)
* MISD 没什么意义

##### MIMD

1. Multiprocess
	1. Distributed memory(NCC-NUMA, CC-NUMA, COMA)
	2. Shared menory(SMP, PVP)
2. Multicomputers
	1. MPP
	2. Clusters

##### 区分

并行与并发

* 并行：同一时刻跑了很多东西，互补干扰，在内部也是同时进行的
* 并发：表面上看起来是同时发生的，但是内部可能使用多个线程，并且使用CPU进行调度

分布式计算和并行计算

* 分布式计算：多台计算机利用网络通讯进行协作，共同完成一项任务，P2P，WEB
* 并行计算：多个处理执行部件（执行核）协作，共同完成某一项任务。各个执行部件同时工作

多核与多处理器

* 多核：两个或者两个以上的CPU或插槽
* 多处理器：一个硅片上搭载两个或者多个核心
* 超线程：逻辑的，虚拟的双处理器，同时执行两个线程，使性能提升

核结构：CMP（chip multiprocessor 单芯片多核芯处理器）

* 同构: 计算机内核相同，地位对等的称为同构多核
* 异构: 计算机内核不相同，地位不对等的称为异构多喝

单核与多核

* 单核的局限性：仅靠主频驱动；主频超过2GHz，功耗过100W；封装和测试占总成本的25%~50%，I/O通常占晶片面积的15%~20%
* 双核的优势：由主频和每时钟周期驱动；平衡性能与功耗；双核共同封装I/O时，总成本下降

##### IBM Cell

核间通信技术

* 总线共享：cache结构，每个CPU内核拥有共享的二级或三级Cache, 保存常用的数据，优点是结构简单，通信速度高，缺点是基于总线的结构可扩展性差
* 基于片上互连的结构：每个CPU核心具有独立的处理单元和Cache, 各个CPU核心通过交叉开关和片上网络等方式连接在一起

##### 并行算法设计

并行算法设计的四个阶段

* 划分
	* 先进行数据分解（域分解）：划分的对象是数据，可以是算法输入数据，中间处理数据和输出数据
	* 再进行计算功能分解：功能分解确定了诸任务键数据流，使数据集和计算集互不相交

* 通讯：诸任务间是并发执行的，通讯则限制了这种并发性
	* 局部/全局
	* 结构化/非结构化
	* 静态/动态
	* 同步/异步

* 组合：由抽象到具体的过程，是将组合的任务能在一类并行机上有效的执行。任务数恰好等于处理器数，完成了映射过程。增加任务的粒度和重复计算，可以减少通讯成本。保持映射和扩展灵活性，减少/降低软件工程成本。
* 映射：每个人物要映射到具体的处理器，定位到运行机器上。任务数大于处理器数时，存在负载均衡问题。映射的目标为减少算法执行时间，具体的做法是将并发的任务分到不同的处理器，任务之间若是存在高通讯，将其分到同一处理器。映射是一种权衡，NP完全问题。